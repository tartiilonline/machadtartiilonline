<!DOCTYPE html>
<html lang="so">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Panel</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="favicon.ico" />
</head>
<body>
  <h1>Admin Panel</h1>

  <div id="login-section">
    <input type="text" id="username" placeholder="Username" />
    <input type="password" id="password" placeholder="Password" />
    <button onclick="login()">Login</button>
    <p id="login-status"></p>
  </div>

  <div id="admin-section" style="display:none;">
    <h2>Ku soo dhawoow Admin</h2>

    <form id="schedule-form">
      <input type="text" name="Subject" placeholder="Maadada" required />
      <input type="text" name="Teacher" placeholder="Macalinka" required />
      <input type="text" name="Time" placeholder="Waqtiga" required />
      <button type="submit">Gudbi Jadwal</button>
    </form>
    <p id="schedule-status"></p>

    <form id="student-form">
      <input type="text" name="Student" placeholder="Magaca Ardayga" required />
      <input type="url" name="Image" placeholder="Image URL" />
      <input type="url" name="Video" placeholder="Video URL" />
      <button type="submit">Gudbi Arday</button>
    </form>
    <p id="student-status"></p>
  </div>

  <script src="darkmode.js"></script>
  <script>
    function login() {
      const u = document.getElementById("username").value;
      const p = document.getElementById("password").value;
      if (u === "tartiilonline" && p === "tartiil2025") {
        document.getElementById("login-section").style.display = "none";
        document.getElementById("admin-section").style.display = "block";
      } else {
        document.getElementById("login-status").textContent = "Khalad Username ama Password!";
      }
    }

    async function handleForm(id, url, statusId) {
      const form = document.getElementById(id);
      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        const status = document.getElementById(statusId);
        const formData = new FormData(form);
        const res = await fetch(url, { method: "POST", body: formData });
        const result = await res.json();
        status.textContent = result.success ? "Waa la keydiyay" : "Error";
        if (result.success) form.reset();
      });
    }

    handleForm("schedule-form", "https://script.google.com/macros/s/AKfycbxKeEK5v9VA4CyxQEqlXLHQXIIR4cXi6fxHGixjpUGLe528vqv-7CiwqCKVYi1WY-eSTQ/exec", "schedule-status");
    handleForm("student-form", "https://script.google.com/macros/s/AKfycbxKeEK5v9VA4CyxQEqlXLHQXIIR4cXi6fxHGixjpUGLe528vqv-7CiwqCKVYi1WY-eSTQ/exec", "student-status");
  </script>
</body>
</html>
<script src="darkmode.js"></script>
